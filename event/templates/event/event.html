{% extends 'event/index.html' %}
{% load static %}

{% block content %}

{% static 'event/images/a3.jpg' as default_url %}

  <div class="app-body light" id="view">
    <!-- ############ PAGE START-->

    <div class="page-content">
      <div class="row-col">
        <div class="col-lg-9 b-r no-border-md">
          <div class="padding">

            <div class="page-title m-b">
              <h2 class="inline m-a-0">Events</h2>
            </div>
            <div class="row item-list item-list-md item-list-li-by m-b">
              {% if events %}
                {% for event in events %}
                  <div id="event_{{ event.id }}" class="col-xs-12">
                    <div class="item r" data-id="item-12">
                      {% if event.artists.all %}
                          {% for artist in event.artists.all %}
                            {% if forloop.counter <= 5 %}
                              <div class="item-media ">
                                <a href="{% url 'event:event_detail' event.id %}" class="item-media-content" style="background-image: url('{{ artist.thumb_url }}');"></a>
                              </div>
                            {% endif %}
                          {% endfor %}
                      {% else %}
                        <div class="item-media ">
                          <a href="{% url 'event:event_detail' event.id %}" class="item-media-content" style="background-image: url({{ default_url }});"></a>
                        </div>
                      {% endif %}
                      <a href="{% url 'event:event_detail' event.id %}" class="item-media-content" style="background-color: transparent">
                        <div class="item-info">
                          <div class="item-overlay bottom text-right">
                            <a class="btn-favorite" {% if user.is_authenticated.value %}data-id="event_{{ event.id }}" data-url="{% url 'event:event_bookmark' event.id %}" {% else %}data-toggle="modal" data-target="#sign-modal"{% endif %}><i class="fa {% if event in user.events.all %}fa-star{% else %}fa-star-o{% endif %}"></i></a>
                          </div>
                          <div class="item-title text-ellipsis">
                            {{ event.title }} @ {{ event.venue.name }}, {{ event.venue.city }}, {{ event.venue.country }}
                          </div>
                          <div class="item-author text-sm text-ellipsis ">
                           {{ event.datetime|date:"l, d M Y â€“ g:i A" }}
                          </div>
                          <div class="item-meta text-sm text-muted">
                            <span class="item-meta-stats text-xs  item-meta-right">
                              {% if event.users.count %}<i class="fa fa-star text-muted"></i>
                                  {{ event.users.count }}{% endif %}
                            </span>
                          </div>
                        </div>
                      </a>
                    </div>
                  </div>
                {% endfor %}
                {% else %}
                  <div class="col-xs-12">
                    No upcoming events
                  </div>
                {% endif %}
              </div>
              {% if is_paginated %}
                <div>
                  <ul class="pagination white">
                    {% if page_obj.has_previous %}
                      <li>
                        <a href="?page={{ page_obj.previous_page_number }}">
                          <i class="fa fa-chevron-left"></i>
                        </a>
                      </li>
                    {% endif %}

                    {% for page in page_obj.paginator.page_range %}
                      <li {% if forloop.counter == page_obj.number %}class="active"{% endif %}>
                        <a href="?page={{ forloop.counter }}">{{ forloop.counter }}</a>
                      </li>
                    {% endfor %}

                    {% if page_obj.has_next %}
                      <li>
                        <a href="?page={{ page_obj.next_page_number }}">
                          <i class="fa fa-chevron-right"></i>
                        </a>
                      </li>
                    {% endif %}
                  </ul>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
{% endblock content %}
